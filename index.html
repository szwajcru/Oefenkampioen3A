<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <title>Woordrijen Toets - Anker</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      background: url('achtergrond.png') no-repeat center center fixed;
      background-size: cover;
    }
    .page {
      display: none;
      min-height: 100vh;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 24px;
    }
    .active { display: flex; }
    .card {
      background: white;
      border: 3px solid #01689B;
      border-radius: 18px;
      padding: 30px 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      max-width: 760px;
      width: calc(100% - 48px);
      z-index: 5;
    }
    h1 {
      font-size: 28px;
      margin: 0 0 16px 0;
    }
    .champion-title {
      font-size: 50px;
      color: #01689B;
      margin: 8px 0 12px 0;
    }
    #woord {
      font-size: clamp(72px, 14vw, 140px);
      font-weight: 800;
      margin: 28px 0 22px 0;
      line-height: 1.05;
      letter-spacing: 1px;
    }
    .btn {
      font-size: 22px;
      margin: 10px;
      padding: 12px 30px;
      border-radius: 12px;
      background-color: #01689B;
      color: white;
      border: none;
      cursor: pointer;
    }
    .btn:hover { background-color: #014f73; }
    input[type=number] {
      font-size: 20px;
      padding: 6px 10px;
      text-align: center;
      width: 90px;
      margin: 10px;
      border-radius: 8px;
      border: 2px solid #cbd5e1;
    }
    .anker-keuze {
      margin: 16px 0;
      font-size: 18px;
      text-align: left;
      display: inline-block;
    }
    .anker-keuze legend {
      font-weight: bold;
      margin-bottom: 6px;
    }
    .anker-keuze label {
      display: block;
      margin: 4px 0;
    }
    #confetti-canvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
  </style>
</head>
<body>

  <!-- Pagina 1: Intro -->
  <div id="page1" class="page active">
    <div class="card">
      <h1>Welkom bij de Woordrijen Toets</h1>
      <p style="max-width:640px;margin:0 auto 10px;">
        Dit programma helpt je kind bij het oefenen van de <strong>woordrijen</strong>.<br>
        Kies hieronder het juiste <strong>Anker</strong>. Je ziet straks steeds een woord groot in beeld.<br>
        Jij als ouder klikt of het woord <strong>juist</strong> of <strong>onjuist</strong> is gelezen.
      </p>
      <fieldset class="anker-keuze">
        <legend>Kies anker:</legend>
        <label><input type="radio" name="anker" value="1" checked> Anker 1</label>
        <label><input type="radio" name="anker" value="2" disabled> Anker 2 (komt binnenkort)</label>
        <label><input type="radio" name="anker" value="3" disabled> Anker 3 (komt binnenkort)</label>
      </fieldset>
      <div>
        <label for="aantalInput">Aantal woorden:</label>
        <input id="aantalInput" type="number" min="1" max="50" value="10" aria-label="Aantal woorden">
      </div>
      <button class="btn" onclick="startToets()">Start</button>
    </div>
  </div>

  <!-- Pagina 2: Toets -->
  <div id="page2" class="page">
    <div class="card">
      <h1 class="champion-title">Oefenkampioen</h1>
      <div id="woord" aria-live="polite">Woord</div>
      <div>
        <button class="btn" onclick="antwoord(true)">Juist</button>
        <button class="btn" onclick="antwoord(false)">Onjuist</button>
      </div>
    </div>
  </div>

  <!-- Pagina 3: Resultaten -->
  <div id="page3" class="page">
    <div class="card">
      <h1 class="champion-title">Oefenkampioen</h1>
      <div id="resultaat" style="font-size:22px;margin-bottom:10px;"></div>
      <button class="btn" onclick="opnieuw()">Nog een toetsje doen</button>
    </div>
  </div>

  <canvas id="confetti-canvas"></canvas>

  <script>
    const ankers = {
      1: [
        "rek","maak","sik","aas","baas","meer","sip","been","vis","vaar",
        "boon","paar","roos","kook","bek","rook",
        "voor","boor","been","naar","peer","kaak","bek","rek","oom","mis",
        "paar","ree","naam","mis","ik","aas",
        "mes","maak","raam","kaas","saar","beer","sep","bek","nep","meen",
        "beer","sip","mis","bek","naam","oom"
      ],
      2: [],
      3: []
    };

    let woorden = [];
    let toetswoorden = [], index = 0, score = 0, startTijd = null;
    const kleuren = ['red','green','blue'];
    const combinaties = ['aa','ee','oo','uu','ei','ui','oe','ai','ooi','aai'];
    const klinkers = ['a','e','i','o','u'];

    function showPage(nr){
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      document.getElementById('page'+nr).classList.add('active');
    }
    function kleurWoord(woord){
      let i=0, html='';
      while(i<woord.length){
        let gevonden=null;
        for(let comb of combinaties){
          if(woord.substring(i,i+comb.length).toLowerCase()===comb){gevonden=comb;break;}
        }
        if(gevonden){
          let kleur=kleuren[Math.floor(Math.random()*kleuren.length)];
          html+=`<span style="color:${kleur}">${woord.substr(i,gevonden.length)}</span>`;
          i+=gevonden.length;
        } else {
          let letter=woord[i];
          if(klinkers.includes(letter.toLowerCase())){
            let kleur=kleuren[Math.floor(Math.random()*kleuren.length)];
            html+=`<span style="color:${kleur}">${letter}</span>`;
          } else { html+=`<span style="color:black">${letter}</span>`; }
          i++;
        }
      }
      return html;
    }
    function shuffle(array){return[...array].sort(()=>Math.random()-0.5);}

    function startToets(){
      const gekozenAnker = document.querySelector('input[name="anker"]:checked').value;
      woorden = ankers[gekozenAnker];

      const aantal=parseInt(document.getElementById('aantalInput').value,10)||10;
      toetswoorden=shuffle(woorden).slice(0,Math.min(aantal,woorden.length));
      index=0;score=0;startTijd=Date.now();
      showPage(2);toonWoord();
    }
    function toonWoord(){
      if(index<toetswoorden.length){
        document.getElementById('woord').innerHTML=kleurWoord(toetswoorden[index]);
      } else {eindeToets();}
    }
    function antwoord(correct){if(correct)score++;index++;toonWoord();}
    function eindeToets(){
      const duurSec=Math.max(1,Math.round((Date.now()-startTijd)/1000));
      const wpm=Math.round((toetswoorden.length/duurSec)*60);
      let percentage=(score/toetswoorden.length)*100;
      let extraMelding="";
      if(percentage<21){extraMelding="Je hebt alvast een begin gemaakt, ga zo door!";}
      else if(percentage<41){extraMelding="Goed geprobeerd, elke keer gaat het beter!";}
      else if(percentage<61){extraMelding="Mooi! Je bent al flink op weg.";}
      else if(percentage<81){extraMelding="Top! Nog een klein beetje oefenen en je hebt alles goed.";}
      else {extraMelding="Geweldig! Alles goed, jij bent een echte Oefenkampioen!";}
      document.getElementById('resultaat').innerHTML=
        `Goed gelezen: <strong>${score}</strong> van de <strong>${toetswoorden.length}</strong><br>`+
        `Tijd: <strong>${duurSec}</strong> seconden<br>`+
        `Snelheid: <strong>${wpm}</strong> woorden per minuut<br>`+
        `<em>${extraMelding}</em>`;
      showPage(3);startConfetti();setTimeout(stopConfetti,3000);
    }
    function opnieuw(){stopConfetti();ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);showPage(1);}

    // Confetti
    const confettiCanvas=document.getElementById('confetti-canvas');const ctx=confettiCanvas.getContext('2d');
    let confettiParticles=[],confettiActive=false;
    function resizeCanvas(){confettiCanvas.width=window.innerWidth;confettiCanvas.height=window.innerHeight;}
    window.addEventListener('resize',resizeCanvas);resizeCanvas();
    function rand(min,max){return Math.random()*(max-min)+min;}
    function ConfettiParticle(){this.x=rand(0,confettiCanvas.width);this.y=rand(-confettiCanvas.height,0);
      this.color=`hsl(${rand(0,360)},100%,55%)`;this.size=rand(4,9);this.speed=rand(2,5);this.tilt=rand(-10,10);}
    function startConfetti(){confettiParticles=Array.from({length:160},()=>new ConfettiParticle());confettiActive=true;updateConfetti();}
    function stopConfetti(){confettiActive=false;}
    function updateConfetti(){
      if(!confettiActive)return;
      ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      for(const p of confettiParticles){
        ctx.fillStyle=p.color;ctx.beginPath();ctx.arc(p.x,p.y,p.size,0,Math.PI*2);ctx.fill();
        p.y+=p.speed;p.x+=Math.sin(p.tilt/20);
        if(p.y>confettiCanvas.height){p.y=rand(-20,0);p.x=rand(0,confettiCanvas.width);}
      }
      requestAnimationFrame(updateConfetti);
    }
  </script>
</body>
</html>
